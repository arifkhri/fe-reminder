"use strict";(self.webpackChunkfe_hr_app=self.webpackChunkfe_hr_app||[]).push([[744],{2193:function(e,n,t){var i=t(1413),a=t(9439),r=t(2791),s=t(7083),l=t(3734),o=t(9657),c=t(946),u=t(1428),d=t(6250),m=t(184);n.Z=function(e){var n=(0,c.Z)().store,t=(0,r.useState)(!1),p=(0,a.Z)(t,2),f=p[0],Z=p[1],h=(0,r.useState)([]),x=(0,a.Z)(h,2),j=x[0],v=x[1],y=(0,r.useState)([]),g=(0,a.Z)(y,2),b=g[0],S=g[1],k=(0,r.useState)([]),w=(0,a.Z)(k,2),_=w[0],N=w[1];function C(e){Z(!0),(0,u.Ds)((function(){o.Z.get("/masterdata/department",{params:{keyword:e}}).then((function(e){var n,t,i=[];((null===(n=e.data)||void 0===n?void 0:n.data)||[]).forEach((function(e){i.push({label:e.name,value:e.name})})),N(i),S((null===(t=e.data)||void 0===t?void 0:t.data)||[]),Z(!1)})).catch((function(){Z(!1),N([])}))}),1e3)}function F(n,t){var i,a=j;!1===(null===(i=e.component)||void 0===i?void 0:i.mode)&&"deselect"!==t?(b.forEach((function(e){e.name===n&&(a=e)})),e.onSelect(a)):"select"===t?(b.forEach((function(e){e.name===n&&a.push(e)})),v(a),e.onSelect(a)):(a=a.filter((function(e){return e.name!==n})),e.onSelect(a),v(a))}return o.Z.config(n),(0,m.jsx)(s.Z,{spinning:f,children:(0,m.jsx)(l.Z,(0,i.Z)({onSelect:function(e){return F(e,"select")},onDeselect:function(e){return F(e,"deselect")},onFocus:function(){_.length||C()},onSearch:C,mode:"multiple",showArrow:!0,tagRender:d.Z,options:_,value:e.valueSelect},e.component))})}},8194:function(e,n,t){var i=t(1413),a=t(9439),r=t(2791),s=t(7083),l=t(3734),o=t(9657),c=t(946),u=t(1428),d=t(6250),m=t(184);n.Z=function(e){var n=(0,c.Z)().store,t=(0,r.useState)(!1),p=(0,a.Z)(t,2),f=p[0],Z=p[1],h=(0,r.useState)([]),x=(0,a.Z)(h,2),j=x[0],v=x[1],y=(0,r.useState)([]),g=(0,a.Z)(y,2),b=g[0],S=g[1],k=(0,r.useState)([]),w=(0,a.Z)(k,2),_=w[0],N=w[1];function C(n){Z(!0),(0,u.Ds)((function(){o.Z.get("/masterdata/position",{params:(0,i.Z)((0,i.Z)({},e.params||{}),{},{keyword:n})}).then((function(e){var n,t,i=[];((null===(n=e.data)||void 0===n?void 0:n.data)||[]).forEach((function(e){i.push({label:e.name,value:e.name})})),N(i),S((null===(t=e.data)||void 0===t?void 0:t.data)||[]),Z(!1)})).catch((function(){Z(!1),N([])}))}),1e3)}function F(n,t){var i,a=j;!1===(null===(i=e.component)||void 0===i?void 0:i.mode)&&"deselect"!==t?(b.forEach((function(e){e.name===n&&(a=e)})),e.onSelect(a)):"select"===t?(b.forEach((function(e){e.name===n&&a.push(e)})),v(a),e.onSelect(a)):(a=a.filter((function(e){return e.name!==n})),v(a),e.onSelect(a))}return o.Z.config(n),(0,r.useEffect)((function(){e.clearOptions&&N([])}),[e.clearOptions]),(0,m.jsx)(s.Z,{spinning:f,children:(0,m.jsx)(l.Z,(0,i.Z)((0,i.Z)({onSelect:function(e){return F(e,"select")},onDeselect:function(e){return F(e,"deselect")},onFocus:function(){_.length||(N([]),C())},onSearch:C,mode:"multiple",showArrow:!0,tagRender:d.Z,options:_},e.component),{},{value:e.valueSelect}))})}},7744:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(4925),a=t(1413),r=t(9439),s=t(2791),l=t(6755),o=t(7309),c=t(6106),u=t(914),d=t(8678),m=t(7382),p=t(6014),f=t(7083),Z=t(7825),h=t(3734),x=t(9221),j=t(1561),v=t(1752),y=t(1730),g=t(2621),b=t(752),S=t(2351),k=t(3605),w=t(9286),_=t(9657),N=t(946),C=t(3272),F=t(6895),I=t(184),E=function(e){var n=(0,s.useState)(!1),t=(0,r.Z)(n,2),i=t[0],a=t[1],l=C.Z.useForm(),c=(0,r.Z)(l,1)[0];return(0,I.jsxs)("div",{className:"import-karyawan-component",children:[(0,I.jsxs)("p",{children:["Untuk menggunakan fitur import karyawan anda dapat ",(0,I.jsx)("br",{}),"menggunakan ",(0,I.jsx)("a",{href:"URL",children:"template ini."})]}),(0,I.jsx)(f.Z,{spinning:i,children:(0,I.jsxs)(C.Z,{form:c,layout:"vertical",onFinish:function(e){a(!0)},children:[(0,I.jsx)(C.Z.Item,{label:"Lampiran",name:"lampiran",rules:[F.Z.required("please input your lampiran")],children:(0,I.jsx)(d.Z,{})}),(0,I.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,I.jsx)(o.Z,{htmlType:"button",onClick:function(){e.afterSubmit()},children:"Kembali"}),(0,I.jsx)(o.Z,{type:"primary",htmlType:"submit",children:"Import"})]})]})})]})},V=t(419),T=t(5861),A=t(4942),L=t(7757),P=t.n(L),U=t(215),K=t(6658),R=t(9529),D=t(1428),O=t(2193),q=t(8194),z=t(3197);var B=function(e){var n=e.onCancel,t=void 0===n?function(){return null}:n,i=e.onSubmit,l=void 0===i?function(){return null}:i,m=e.data,p=void 0===m?null:m,f=C.Z.useForm(),Z=(0,r.Z)(f,1)[0],h=(0,s.useState)([]),x=(0,r.Z)(h,2),j=x[0],v=x[1];function y(e,n){var t;"department"===n&&g(),Z.setFieldsValue((t={},(0,A.Z)(t,n,e.name),(0,A.Z)(t,"".concat(n,"_id"),e.id),t))}function g(){Z.setFieldsValue({position:null,position_id:null})}function b(e){var n;Z.setFieldsValue((n={},(0,A.Z)(n,e,null),(0,A.Z)(n,"".concat(e,"_id"),null),n)),"department"===e&&g()}var S=function(){var e=(0,T.Z)(P().mark((function e(n){var t,i,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.url){e.next=5;break}return e.next=4,new Promise((function(e){var t=new FileReader;t.readAsDataURL(n.originFileObj),t.onload=function(){return e(t.result)}}));case 4:t=e.sent;case 5:(i=new Image).src=t,null===(a=window.open(t))||void 0===a||a.document.write(i.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){p&&(p.picture_url&&v([{uid:"1",name:p.picture_url,status:"done",url:"".concat(z.Z.API_BE_URL,"/picture/employee/").concat(p.picture_url)}]),Z.setFieldsValue(p))}),[p]),(0,I.jsxs)(C.Z,{form:Z,layout:"vertical",onFinish:function(){var e=Z.getFieldsValue(!0);l((0,a.Z)((0,a.Z)({},e),{},{file:j.length?j[0].originFileObj:null}))},className:"employee-form",children:[(0,I.jsxs)(c.Z,{gutter:[16,16],children:[(0,I.jsx)(u.Z,{span:24,children:(0,I.jsx)(K.Z,{rotate:!0,children:(0,I.jsx)(U.Z,{className:j.length&&"uploaded",maxCount:1,customRequest:function(e){var n=e.onSuccess;setTimeout((function(){n(!0)}),0)},defaultFileList:j,listType:"picture-card",fileList:j,onChange:function(e){var n=e.fileList;v(n)},onPreview:S,children:(0,I.jsx)(R.Z,{style:{fontSize:"60px",color:"#737373"}})})})}),(0,I.jsx)(u.Z,{span:24,children:(0,I.jsxs)(c.Z,{gutter:[16,16],children:[(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{label:"NIK",name:"nik",rules:[F.Z.required()],children:(0,I.jsx)(d.Z,{})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{label:"Nama Lengkap",name:"full_name",rules:[F.Z.required()],children:(0,I.jsx)(d.Z,{})})})]})}),(0,I.jsx)(u.Z,{span:24,children:(0,I.jsxs)(c.Z,{gutter:[16,16],children:[(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{label:"Email",name:"email",rules:[F.Z.required()],children:(0,I.jsx)(d.Z,{})})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{label:"No Telepon",name:"phone",rules:[F.Z.required()],children:(0,I.jsx)(d.Z,{prefix:"+62",onChange:function(e){Z.setFieldsValue({phone:(0,D.AI)(e)})}})})})]})}),(0,I.jsx)(u.Z,{span:24,children:(0,I.jsxs)(c.Z,{gutter:[16,16],children:[(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{shouldUpdate:function(e,n){return e.department!==n.department},children:function(e){var n=e.getFieldValue;return(0,I.jsx)(C.Z.Item,{label:"Departemen",name:"department",children:(0,I.jsx)(O.Z,{valueSelect:n("department"),onSelect:function(e){y(e,"department")},component:{allowClear:!0,showSearch:!0,mode:!1,onClear:function(){return b("department")}}})})}})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{shouldUpdate:function(e,n){return e.position!==n.position||e.department!==n.department},children:function(e){var n=e.getFieldValue;e.prevValues;return(0,I.jsx)(C.Z.Item,{label:"Jabatan",name:"position",children:(0,I.jsx)(q.Z,{clearOptions:n("department_id"),params:{department_id:n("department_id")},valueSelect:n("position"),onSelect:function(e){return y(e,"position")},component:{allowClear:!0,showSearch:!0,mode:!1,disabled:!n("department_id"),onClear:function(){return b("position")}}})})}})})]})})]}),(0,I.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,I.jsx)(o.Z,{htmlType:"button",onClick:t,children:"Kembali"}),(0,I.jsx)(o.Z,{type:"primary",htmlType:"submit",children:"Kirim"})]})]})};var J=function(e){var n=(0,N.Z)().store,t=(0,s.useState)(!1),i=(0,r.Z)(t,2),a=i[0],l=i[1];return _.Z.config(n),(0,I.jsx)(f.Z,{spinning:a,children:(0,I.jsx)(B,{onSubmit:function(n){var t=new FormData;t.set("full_name",n.full_name),t.set("email",n.email),t.set("phone",n.phone),t.set("nik",n.nik),t.set("file",n.file||""),t.set("position_id",n.position_id),t.set("department_id",n.department_id),l(!0),_.Z.post("/employee",t).then((function(n){l(!1),V.ZP.success(n.data),e.afterSubmit()})).catch((function(e){var n=e.response;V.ZP.error(n.data),l(!1)}))},onCancel:function(){e.afterSubmit()}})})},M=function(e){var n=e.afterSubmit,t=void 0===n?function(){return null}:n,i=e.onCancel,l=void 0===i?function(){return null}:i,d=e.filterValues,m=(0,N.Z)().store,p=C.Z.useForm(),f=(0,r.Z)(p,1)[0];function Z(e,n){var t;f.setFieldsValue((t={},(0,A.Z)(t,n,e.map((function(e){return e.name}))),(0,A.Z)(t,"".concat(n,"_id"),e.map((function(e){return e.id}))),t))}return _.Z.config(m),(0,s.useEffect)((function(){f.setFieldsValue({position:d.position?(d.position||"").split(","):[],department:d.department?(d.department||"").split(","):[]})}),[d]),(0,I.jsxs)(C.Z,{form:f,layout:"vertical",onFinish:function(){var e=f.getFieldsValue(!0);t((0,a.Z)((0,a.Z)({},e),{},{position:e.position.toString(),department:e.department.toString()}))},children:[(0,I.jsx)(u.Z,{span:24,children:(0,I.jsxs)(c.Z,{gutter:[16,16],children:[(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{shouldUpdate:function(e,n){return e.department!==n.department},children:function(e){var n=e.getFieldValue;return(0,I.jsx)(C.Z.Item,{label:"Departemen",name:"department",children:(0,I.jsx)(O.Z,{valueSelect:n("department"),onSelect:function(e){return Z(e,"department")}})})}})}),(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(C.Z.Item,{shouldUpdate:function(e,n){return e.department!==n.department},children:function(e){var n=e.getFieldValue;return(0,I.jsx)(C.Z.Item,{label:"Jabatan",name:"position",children:(0,I.jsx)(q.Z,{valueSelect:n("position"),onSelect:function(e){return Z(e,"position")}})})}})})]})}),(0,I.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,I.jsx)(o.Z,{htmlType:"button",onClick:l,children:"Kembali"}),(0,I.jsx)(o.Z,{type:"primary",htmlType:"submit",children:"Simpan"})]})]})};var H=function(e){var n=(0,N.Z)().store,t=(0,s.useState)(!1),i=(0,r.Z)(t,2),a=i[0],l=i[1];return _.Z.config(n),(0,I.jsx)(f.Z,{spinning:a,children:(0,I.jsx)(B,{data:e.data,onSubmit:function(n){var t=new FormData;t.set("full_name",n.full_name),t.set("email",n.email),t.set("phone",n.phone),t.set("nik",n.nik),t.set("file",n.file||""),t.set("position_id",n.position_id),t.set("department_id",n.department_id),l(!0),_.Z.put("/employee/".concat(e.data.id),t).then((function(n){l(!1),V.ZP.success(n.data),e.afterSubmit()})).catch((function(e){var n=e.response;V.ZP.error(n.data),l(!1)}))},onCancel:function(){e.afterSubmit()}})})},W=["limit","offset"];var G=function(){var e=(0,N.Z)(),n=e.store,t=e.dispatch,C=(0,s.useState)({offset:0,limit:10,resource:[],current:0,total:0}),F=(0,r.Z)(C,2),V=F[0],T=F[1],A=(0,s.useState)({keyword:""}),L=(0,r.Z)(A,2),P=L[0],U=L[1],K=(0,s.useState)(null),R=(0,r.Z)(K,2),D=R[0],O=R[1],q=(0,s.useState)(!1),B=(0,r.Z)(q,2),G=B[0],Q=B[1];_.Z.config(n);var X=[{title:"",with:"60px",dataIndex:"picture_url",key:"picture",render:function(e){return(0,I.jsx)(l.Z,{width:80,src:e?"".concat(z.Z.API_BE_URL,"/picture/employee/").concat(e):"images/employee-default.png",placeholder:(0,I.jsx)(l.Z,{preview:!1,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200})})}},{title:"NAMA",dataIndex:"full_name",align:"center",key:"name",render:function(e,n){return(0,I.jsxs)("div",{className:"d-flex d-flex align-items-center flex-column",children:[(0,I.jsx)("span",{className:"value",children:e}),(0,I.jsx)("span",{className:"desc-value",children:n.nik||"-"})]})}},{title:"JABATAN ",dataIndex:"position",align:"center",key:"position",render:function(e,n){return(0,I.jsxs)("div",{className:"d-flex d-flex align-items-center flex-column",children:[(0,I.jsx)("span",{className:"value",children:e}),(0,I.jsx)("span",{className:"desc-value",children:n.department||"-"})]})}},{title:"EMAIL",dataIndex:"email",key:"email"},{title:"NO.TELP",key:"tags",dataIndex:"phone",render:function(e){return"+62".concat(e)}},{title:"",key:"action",dataIndex:"edit",render:function(e,n){return(0,I.jsx)(o.Z,{className:"btn-sm btn-faint-primary",type:"",onClick:function(){return Y("update",n)},children:(0,I.jsx)(v.Z,{})})}}],Y=function(e,n){var t={content:(0,I.jsx)(J,{afterSubmit:function(){return $()}}),title:"Karyawan",visible:!0,onCancel:function(){O({visible:!1})}};"import"===e&&(t.content=(0,I.jsx)(E,{data:n,afterSubmit:function(){return $()}}),t.title="Import Karyawan"),"filter"===e&&(t.content=(0,I.jsx)(M,{filterValues:P,afterSubmit:function(e){return function(e){ee((0,a.Z)({keyword:P.keyword},e)),O({visible:!1})}(e)}}),t.title="Filter Karyawan"),"update"===e&&(t.content=(0,I.jsx)(H,{data:n,afterSubmit:function(){return $()}}),t.title="Ubah Karyawan"),O(t)};function $(){ee(),O({visible:!1})}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.limit,t=void 0===n?null:n,r=e.offset,s=void 0===r?null:r,l=(0,i.Z)(e,W);Q(!0),_.Z.get("/employee",{params:(0,a.Z)((0,a.Z)({},l),{},{limit:t||V.limit,offset:s||V.offset})}).then((function(e){Q(!1),T({limit:e.data.limit,offset:e.data.offset,current:V.current,resource:e.data.data,total:e.data.total}),U(l)})).catch((function(){Q(!1)}))}return(0,s.useEffect)((function(){t({type:"update",name:"headerTitle",value:"Karyawan"}),ee()}),[]),(0,I.jsxs)("div",{children:[(0,I.jsxs)(c.Z,{className:"mb-4 mt-5 pt-2",children:[(0,I.jsx)(u.Z,{className:"search",xs:24,md:12,children:(0,I.jsxs)(c.Z,{justify:"start",children:[(0,I.jsx)(u.Z,{span:12,children:(0,I.jsx)(d.Z,{value:P.keyword,prefix:(0,I.jsx)(y.Z,{}),placeholder:"Cari",onChange:function(e){U((0,a.Z)((0,a.Z)({},P),{},{keyword:e.target.value}))},onPressEnter:function(){return ee((0,a.Z)((0,a.Z)({},P),{},{keyword:P.keyword}))},suffix:(0,I.jsx)(g.Z,{onClick:function(){return U((0,a.Z)((0,a.Z)({},P),{},{keyword:""}))}})})}),(0,I.jsx)(u.Z,{children:(0,I.jsx)(o.Z,{className:"btn-snow btn-sm ml-3",type:"primary",onClick:function(){return Y("filter")},children:(0,I.jsx)(b.Z,{})})})]})}),(0,I.jsx)(u.Z,{xs:24,md:12,className:"mt-md-0  mt-2",children:(0,I.jsxs)(c.Z,{justify:"end",children:[(0,I.jsx)(u.Z,{className:"px-2",children:(0,I.jsxs)(o.Z,{className:"btn-snow-success",type:"primary",onClick:function(){return Y("import")},children:[(0,I.jsx)(S.Z,{}),"Import"]})}),(0,I.jsx)(u.Z,{children:(0,I.jsx)(m.Z,{overlay:(0,I.jsx)(p.Z,{items:[{label:"Berdasarkan Filter"},{label:"Semua data"}]}),placement:"bottomRight",trigger:["click"],children:(0,I.jsxs)(o.Z,{className:"btn-snow-danger",type:"primary",children:[(0,I.jsx)(S.Z,{}),"Export"]})})}),(0,I.jsx)(u.Z,{className:"pl-2 pr-4 mr-4 border-right",children:(0,I.jsx)(o.Z,{className:"btn-snow btn-sm",type:"primary",onClick:function(){return ee()},children:(0,I.jsx)(k.Z,{})})}),(0,I.jsx)(u.Z,{children:(0,I.jsxs)(o.Z,{className:"btn-user",type:"primary",onClick:Y,children:["Karyawan Baru ",(0,I.jsx)(w.Z,{})]})})]})})]}),(0,I.jsx)("div",{className:"list",children:(0,I.jsxs)(f.Z,{spinning:G,children:[(0,I.jsx)(Z.Z,{columns:X,dataSource:V.resource,size:"small",pagination:!1}),(0,I.jsxs)(c.Z,{className:"mt-2",children:[(0,I.jsx)(u.Z,{xs:24,md:12,children:(0,I.jsxs)("div",{className:"d-flex align-items-center",children:[(0,I.jsxs)("span",{className:"d-flex align-items-center",children:[(0,I.jsx)("span",{className:"mr-2",children:"Menampilkan"}),(0,I.jsxs)(h.Z,{value:V.limit,onChange:function(e){ee({limit:e})},children:[(0,I.jsx)(h.Z.Option,{value:10,children:"10"}),(0,I.jsx)(h.Z.Option,{value:20,children:"20"}),(0,I.jsx)(h.Z.Option,{value:30,children:"30"})]})]}),(0,I.jsx)("span",{className:"px-2",children:"|"}),(0,I.jsxs)("span",{children:["Total ",V.total," "]})]})}),(0,I.jsx)(u.Z,{xs:24,md:12,className:"mt-md-0 mt-2 d-flex justify-content-end",children:(0,I.jsx)(x.Z,{onChange:function(e){ee({offset:e})},total:V.total,pageSize:V.limit})})]})]})}),(null===D||void 0===D?void 0:D.visible)&&(0,I.jsx)(j.Z,{footer:null,title:null===D||void 0===D?void 0:D.title,visible:null===D||void 0===D?void 0:D.visible,onCancel:null===D||void 0===D?void 0:D.onCancel,children:null===D||void 0===D?void 0:D.content})]})}}}]);
//# sourceMappingURL=744.1f48b77f.chunk.js.map